###### 第一版

###### 用户端

用户使用的客户端

第一版以规定工期内完成任务提包为主，但交互等测试要求比马甲要高

###### 工期

单人30个工作日左右

很多细节无法体现到UI图上，最好留一周的时间来完善以及融合马甲

###### 主要功能

首页：Hot、New、Following、搜索、主播详情

消息模块：即时通讯、通话记录

排行榜：各榜单的日榜、周榜

个人中心

###### 代码规范

驼峰命名

开发之初规避敏感词，如：PayPal、isApple、isInReview等

加前缀，规避以前的项目前缀，例如：

· 类名、枚举：UxZ

· 方法名：jd_

· 宏定义、常量等：kJdv

· 资源文件（图片资源+其他媒体资源）：mx_（模块_子模块_图片资源名）

###### 网络封装

Swagger接口文档不好用，可以用Apifox

接口所需字段，能传的都传，反之传空字符串即可

Query不管请求方式都需要拼到URL上

接口返回错误码，但也可能需要外部处理。如：关注主播，接口返回已关注的错误码，也需更新UI

注意接口请求的编码格式，有的参数含有https。如：设置相册

###### ImNew、登录、绑定

ImNew：调用TryPlay接口，注册成为游客账号，直接进入App。同等设备特征只会注册一次，其余判定为登录

绑定：游客账号通过个人中心的入口进入绑定邮箱

自动登录：杀掉进程的情况下，建议每次都重新调用Login/TryPlay请求数据进入App

###### Session过期、失效

除了特定需求跳转至登录页外，需要重连，但需要注意避免无限制地重连

第一版可不做重连

###### 主播个性签名

mood。如未设置个性签名的情况下，展示：Welcome to my world and look forward to chill with you.

###### 即时通讯

LeanCloud与本地数据库的结合使用

显示：消息记录分页、时间显示逻辑

客服消息

离线消息

###### 私聊通话

RTC与RTM的联合使用

双方画面模糊逻辑，历史版本遗留问题适配，通过sendStreamMessage发送特殊字段：

· 主播模糊：kAgoraMessage_HostFuzzy

· 主播不模糊：kAgoraMessage_HostFuzzy_No

· 用户模糊：1

· 用户不模糊：0

弹幕：RTC的数据流实现，开辟数据通道时传入指针，声网会生成ID存入指针对应的地址

扣款：RTM接收消息

RTC：声网建议整个App生命周期初始化一个EngineKit，私聊、直播等模块只需要切换配置即可。老的代码为一个视频模块为一个生命周期，体验欠佳，但植入方便。两种方式均可

###### 服务器通知（长连接）

RTM的使用：点对点消息、频道消息

整个账号生命周期初始化登录一次，登录后可接收点对点消息

可同时加入多个频道，接收频道消息

###### 排行榜

3*2的组合列表，左右滑动，上下滑动，缺省状态

服务器逻辑半小时变动一次，保证体验的情况下尽量少的请求数据，提供有刷新即可

###### 个人资料编辑

封面及相册的逻辑：1 + 6

图片上传Amz s3：尽量不要等到点击Save的时候再上传

Save：多接口调用，尽量保证所有接口成功再返回

###### 充值

苹果充值：消耗型产品，原生充值

三方充值：统一Web处理，前端只需要请求接口拿到一个地址用Web加载出来即可

###### 多语言国际化

第一版不做，但是需要准备上，避免做的时候一个一个去找字符串

###### 顶部提示窗

两大类：消息、提示（成功、失败、中性）

动画效果、滑动消失、延迟自动消失、消息可点击

###### 统计

只需接入Facebook、Firebase的精细化打点

[产品发行&项目组需求对接](https://doc.weixin.qq.com/sheet/e3_m_AUGViCgBqJAr?scode=AN0ASQdZABEFnok8fCAFsAXgaiADM) 选择 'Facebook SDK 打点事件'

[Firebase精细化打点](https://doc.weixin.qq.com/txdoc/excel?docid=e2_ADoAtwaqAFQ5Za0A8LCS7mxbNlpsy&scode=AN0ASQdZABEIoa5r19ADoAtwaqAFQ&type=1)